<html>
  <head>
    <title>_hyperscript Score Keeper</title>
    <link rel="stylesheet" href="score-keeper.css" />
    <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
    <script type="text/hyperscript">
      def color(like)
        if like return 'red' end
        return 'white'
      end

      def heart(like)
        if like return '‚ù§Ô∏è' end
        return 'ü§ç'
      end

      def report()
        set text to 'The score is tied.'
        if $score1 > $score2 then set text to `The ${$team1} are winning.` end
        if $score2 > $score1 then set text to `The ${$team2} are winning.` end
        set the textContent of #report to text
      end
    </script>
  </head>
  <body
    _="init
    set $like1 to false
    set $like2 to false
    set $score1 to 25
    set $score2 to 22
    set $team1 to 'Chiefs'
    set $team2 to '49ers'
  "
  >
    <main class="column">
      <div id="report" _="init report()"></div>
      <section class="column team">
        <label>
          Team
          <input
            type="text"
            _="
              init set my value to $team1
              on change set $team1 to my value
            "
          />
        </label>
        <label>
          Score
          <input
            type="number"
            _="
              init set my value to $score1
              on change
                set $score1 to my value
                report()
            "
          />
        </label>
        <button
          _="on click
            set $like1 to not $like1
            set *border-color of closest parent <section/> to color($like1)
            set my textContent to heart($like1)
            "
        >
          ü§ç
        </button>
      </section>
      <!-- We could avoid this repetition by creating a web component. -->
      <section class="column team">
        <label>
          Team
          <input
            type="text"
            _="
              init set my value to $team2
              on change set $team2 to my value
            "
          />
        </label>
        <label>
          Score
          <input
            type="number"
            _="
              init set my value to $score2
              on change
                set $score2 to my value
                report()
            "
          />
        </label>
        <button
          _="on click
            set $like2 to not $like2
            set *border-color of closest parent <section/> to color($like2)
            set my textContent to heart($like2)
            "
        >
          ü§ç
        </button>
      </section>
    </main>
  </body>
</html>
